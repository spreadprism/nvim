{
  pkgs,
  vim_pkgs,
  nvim_pkgs,
  ...
}: {
  lspsAndRuntimeDeps = with pkgs; [
    ripgrep
    fd
    vscode-langservers-extracted
    ast-grep
    marksman
    prettierd
    nodePackages_latest.vscode-json-languageserver
    yaml-language-server
    jq
    just-lsp
  ];
  startupPlugins = with vim_pkgs;
    [
      lze
      mini-pairs
      lzextras
      plenary-nvim
      promise-async
      nvim-web-devicons
      transparent-nvim
      which-key-nvim
      SchemaStore-nvim
    ]
    ++ (with nvim_pkgs; [
      oil
      oil-vcs-status
      lspconfig
    ]);
  optionalPlugins = with vim_pkgs;
    [
      neoscroll-nvim
      nui-nvim
      vim-startuptime
      nvim-notify
      noice-nvim
      dressing-nvim
      todo-comments-nvim
      mini-indentscope
      nvim-highlight-colors
      smart-splits-nvim
      nvim-ts-autotag
      mini-ai
      mini-surround
      mini-move
      nvim-surround
      comment-nvim
      blink-cmp
      neoconf-nvim
      fidget-nvim
      telescope-nvim
      telescope-zf-native-nvim
      telescope-fzf-native-nvim
      telescope-dap-nvim
      hop-nvim
      conform-nvim
      tabout-nvim
      nvim-ufo
      luasnip
      grug-far-nvim
      # trouble-nvim
      treesj
      flash-nvim
      yanky-nvim
      neogen
    ]
    ++ (with nvim_pkgs; [
      lualine-nvim
      harpoon
      esqueleto
      easycolor
      live-command
      render-markdown
      blink-compat
      dir-telescope
      nvim-lint
      overseer
      guess-indent
      search-replace
      undotree
      quicker
      gotmpl
      yaml
    ]);
}
